<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta property="og:title" content="Aplus" />
    <meta property="og:type" content="website" />
    <meta property="og:url" content="https://aplus.netlify.app/" />
    <meta property="og:image" content="https://aplus.netlify.app/assets/logo.png" />
    <meta property="og:description" content="Educational feed hackathon application" />

    <link rel="icon" href="./assets/logo.png" />
    <link rel="stylesheet" href="./tailwind.css" />
    <link rel="stylesheet" href="./styles.css" />

    <title>Aplus</title>
  </head>
  <body>
    <div id="app" class="clearfix">
      <nav class="bg-gray-800">
        <div class="max-w-7xl mx-auto px-2 sm:px-6 lg:px-8">
          <div class="relative flex items-center justify-between h-16">
            <div class="flex sm:items-stretch sm:justify-start">
              <img class="block h-8 w-auto" src="./assets/logo.png" alt="Logo" />
            </div>
            <div class="text-gray-100 w-1/3 relative">
              <input type="search" placeholder="Search..." class="bg-gray-900 w-full h-10 px-5 pr-16 text-sm rounded-sm focus:outline-none">
              <button type="submit" class="absolute right-0 top-1/2 mr-4 transform -translate-y-1/2">
                <svg class="fill-current" width="16" height="16" xmlns="http://www.w3.org/2000/svg"
                  xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" id="Capa_1" x="0px" y="0px"
                  viewBox="0 0 56.966 56.966" style="enable-background:new 0 0 56.966 56.966;" xml:space="preserve">
                  <path
                    d="M55.146,51.887L41.588,37.786c3.486-4.144,5.396-9.358,5.396-14.786c0-12.682-10.318-23-23-23s-23,10.318-23,23  s10.318,23,23,23c4.761,0,9.298-1.436,13.177-4.162l13.661,14.208c0.571,0.593,1.339,0.92,2.162,0.92  c0.779,0,1.518-0.297,2.079-0.837C56.255,54.982,56.293,53.08,55.146,51.887z M23.984,6c9.374,0,17,7.626,17,17s-7.626,17-17,17  s-17-7.626-17-17S14.61,6,23.984,6z" />
                </svg>
              </button>
            </div>
            <div>
              <button
                @click="identifyAction"
                :hidden="loggedIn"
                class="px-4 py-2 text-sm bg-gray-900 text-white rounded-md font-medium"
              >
                Login
              </button>

              <div class="ml-3 relative" :hidden="!loggedIn">
                <div>
                  <button
                    class="bg-gray-800 flex text-white text-sm rounded-full focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-gray-800 focus:ring-white"
                    id="user-btn"
                  ></button>
                </div>
              </div>
              <div
                class="origin-top-right absolute right-0 mt-2 w-48 rounded-md shadow-lg py-1 bg-white ring-1 ring-gray-900 ring-opacity-5 hidden hidden-custom"
                id="user-menu"
              >
                <a class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100">Your Profile</a>
                <a
                  id="sign-out"
                  @click="identifyAction"
                  class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100"
                  >Sign out</a
                >
              </div>
            </div>
          </div>
        </div>
      </nav>

      <div id="feed-main" class="clearfix max-w-7xl mx-auto mt-14 space-x-8">
        <div id="browse-container" class="float-left h-16">
          <div id="menu-block" class="flex flex-col w-full text-sm text-gray-400">
            <div id="main-menu">
              <div class="uppercase py-3 tracking-wider">Menu</div>
              <div
                class="rounded-md my-1 py-2 px-2 bg-purple-100 text-purple-600 flex items-center cursor-pointer"
              >
                <svg
                  class="mr-1"
                  xmlns="http://www.w3.org/2000/svg"
                  width="20"
                  height="20"
                  viewBox="0 0 20 20"
                  fill="currentColor"
                >
                  <path
                    fillRule="evenodd"
                    d="M12.395 2.553a1 1 0 00-1.45-.385c-.345.23-.614.558-.822.88-.214.33-.403.713-.57 1.116-.334.804-.614 1.768-.84 2.734a31.365 31.365 0 00-.613 3.58 2.64 2.64 0 01-.945-1.067c-.328-.68-.398-1.534-.398-2.654A1 1 0 005.05 6.05 6.981 6.981 0 003 11a7 7 0 1011.95-4.95c-.592-.591-.98-.985-1.348-1.467-.363-.476-.724-1.063-1.207-2.03zM12.12 15.12A3 3 0 017 13s.879.5 2.5.5c0-1 .5-4 1.25-4.5.5 1 .786 1.293 1.371 1.879A2.99 2.99 0 0113 13a2.99 2.99 0 01-.879 2.121z"
                    clipRule="evenodd"
                  />
                </svg>
                <span>Trending</span>
              </div>
              <div
                class="rounded-md my-1 py-2 px-2 text-sm flex items-center hover:bg-gray-100 cursor-pointer"
              >
                <svg
                  width="20"
                  height="20"
                  class="mr-1"
                  xmlns="http://www.w3.org/2000/svg"
                  viewBox="0 0 20 20"
                  fill="currentColor"
                >
                  <path
                    fillRule="evenodd"
                    d="M11.3 1.046A1 1 0 0112 2v5h4a1 1 0 01.82 1.573l-7 10A1 1 0 018 18v-5H4a1 1 0 01-.82-1.573l7-10a1 1 0 011.12-.38z"
                    clipRule="evenodd"
                  />
                </svg>
                <span>Latest</span>
              </div>
            </div>
            <div id="subject-menu">
              <div class="uppercase py-3 tracking-wider">Subjects</div>
              <div
                class="rounded-md my-1 py-2 px-2 text-sm flex items-center hover:bg-gray-100 cursor-pointer"
              >
                <svg
                  class="mr-1"
                  width="20"
                  height="20"
                  xmlns="http://www.w3.org/2000/svg"
                  viewBox="0 0 20 20"
                  fill="currentColor"
                >
                  <path
                    d="M2 11a1 1 0 011-1h2a1 1 0 011 1v5a1 1 0 01-1 1H3a1 1 0 01-1-1v-5zM8 7a1 1 0 011-1h2a1 1 0 011 1v9a1 1 0 01-1 1H9a1 1 0 01-1-1V7zM14 4a1 1 0 011-1h2a1 1 0 011 1v12a1 1 0 01-1 1h-2a1 1 0 01-1-1V4z"
                  />
                </svg>
                <span>Math</span>
              </div>
              <div
                class="rounded-md my-1 py-2 px-2 text-sm flex items-center hover:bg-gray-100 cursor-pointer"
              >
                <svg
                  class="mr-1"
                  width="20"
                  height="20"
                  xmlns="http://www.w3.org/2000/svg"
                  viewBox="0 0 20 20"
                  fill="currentColor"
                >
                  <path
                    fillRule="evenodd"
                    d="M7 2a1 1 0 00-.707 1.707L7 4.414v3.758a1 1 0 01-.293.707l-4 4C.817 14.769 2.156 18 4.828 18h10.343c2.673 0 4.012-3.231 2.122-5.121l-4-4A1 1 0 0113 8.172V4.414l.707-.707A1 1 0 0013 2H7zm2 6.172V4h2v4.172a3 3 0 00.879 2.12l1.027 1.028a4 4 0 00-2.171.102l-.47.156a4 4 0 01-2.53 0l-.563-.187a1.993 1.993 0 00-.114-.035l1.063-1.063A3 3 0 009 8.172z"
                    clipRule="evenodd"
                  />
                </svg>
                <span>Science</span>
              </div>
            </div>
          </div>
        </div>

        <div
          id="feed-container"
          l-for="post in posts"
          class="align-top float-left h-16 space-y-12"
          l-mask
        >
          <div class="w-full flex p-8 shadow-custom rounded-md">
            <div class="flex flex-col items-center pr-8">
              <svg
                id="unheart"
                xmlns="http://www.w3.org/2000/svg"
                width="24"
                height="24"
                fill="none"
                viewBox="0 0 24 24"
                stroke="currentColor"
              >
                <path
                  strokeLinecap="round"
                  strokeLinejoin="round"
                  strokeWidth="{2}"
                  d="M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"
                />
              </svg>
              <svg
                class="hidden"
                id="heart"
                width="24"
                height="24"
                xmlns="http://www.w3.org/2000/svg"
                viewBox="0 0 20 20"
                fill="currentColor"
              >
                <path
                  fillRule="evenodd"
                  d="M3.172 5.172a4 4 0 015.656 0L10 6.343l1.172-1.171a4 4 0 115.656 5.656L10 17.657l-6.828-6.829a4 4 0 010-5.656z"
                  clipRule="evenodd"
                />
              </svg>
              <span class="my-2 font-medium" l-text="this.post.hearts || 0">24</span>
            </div>
            <div id="card-content" class="flex-1">
              <h1 class="m-0 font-bold text-2xl text-gray-900" l-text="this.post.title"></h1>
              <div class="mt-2 text-gray-500 text-base leading-8">
                <p l-html="DOMPurify.sanitize(marked(this.post.body))">
                  Lorem ipsum dolor sit amet consectetur adipisicing elit. Quis ad cumque sequi
                  molestiae hic saepe cupiditate, ab soluta blanditiis autem earum voluptas dolore
                  aliquam enim accusantium illo expedita eius vel dolores! Saepe voluptatem autem
                  laborum ut facilis quia unde dolor.
                </p>
              </div>
              <div class="hr my-6"></div>
              <div id="card-meta" class="text-sm text-gray-400 flex justify-between">
                <span class=""
                  >Posted by <a l-text="this.post.name" class="text-purple-500"></a
                ></span>
                <span l-text="this.post.date || new Date().toLocaleDateString()"></span>
                <div class="flex items-center">
                  <svg
                    width="24"
                    height="24"
                    xmlns="http://www.w3.org/2000/svg"
                    fill="none"
                    viewBox="0 0 24 24"
                    stroke="currentColor"
                  >
                    <path
                      strokeLinecap="round"
                      strokeLinejoin="round"
                      strokeWidth="{2}"
                      d="M17 8h2a2 2 0 012 2v6a2 2 0 01-2 2h-2v4l-4-4H9a1.994 1.994 0 01-1.414-.586m0 0L11 14h4a2 2 0 002-2V6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2v4l.586-.586z"
                    />
                  </svg>
                  <span class="inline-block ml-2" l-text="this.post.comments?.length || 0"></span>
                </div>
              </div>
            </div>
          </div>
        </div>

        <div id="util-container" class="float-left h-16 space-y-12">
          <button
            class="px-4 py-3 w-full text-md bg-gray-900 text-white rounded-md flex justify-center"
            :hidden="!loggedIn"
            id="create-post"
          >
            <svg
              class="mr-1"
              xmlns="http://www.w3.org/2000/svg"
              width="24"
              height="24"
              fill="none"
              viewBox="0 0 24 24"
              stroke="currentColor"
            >
              <path
                strokeLinecap="round"
                strokeLinejoin="round"
                strokeWidth="{2}"
                d="M12 6v6m0 0v6m0-6h6m-6 0H6"
              />
            </svg>
            <span>Create a New Post</span>
          </button>
          <div id="top-users" class="w-full flex flex-col p-8 shadow-custom rounded-md">
            <span class="text-base font-medium mb-3">Top Users</span>
            <div l-for="post in topUsers">
              <div class="flex justify-between text-gray-400 font-normal text-sm my-1 py-2">
                <span l-text="this.post.name"></span>
                <div class="flex">
                  <span class="mr-1" l-text="this.post.hearts || 0"></span>
                  <svg
                    width="20"
                    height="20"
                    xmlns="http://www.w3.org/2000/svg"
                    viewBox="0 0 20 20"
                    fill="currentColor"
                  >
                    <path
                      fillRule="evenodd"
                      d="M3.172 5.172a4 4 0 015.656 0L10 6.343l1.172-1.171a4 4 0 115.656 5.656L10 17.657l-6.828-6.829a4 4 0 010-5.656z"
                      clipRule="evenodd"
                    />
                  </svg>
                </div>
              </div>
            </div>

            <div class="hr my-3"></div>
            <div class="flex justify-between text-gray-400 font-normal text-sm my-1 py-2">
              <span>You</span>
              <div class="flex">
                <span class="mr-1" l-text="userHearts"></span>
                <svg
                  width="20"
                  height="20"
                  xmlns="http://www.w3.org/2000/svg"
                  viewBox="0 0 20 20"
                  fill="currentColor"
                >
                  <path
                    fillRule="evenodd"
                    d="M3.172 5.172a4 4 0 015.656 0L10 6.343l1.172-1.171a4 4 0 115.656 5.656L10 17.657l-6.828-6.829a4 4 0 010-5.656z"
                    clipRule="evenodd"
                  />
                </svg>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div id="post-modal" class="hidden flex fixed inset-0 z-10">
        <div id="post-modal-bg" class="absolute inset-0 bg-gray-500"></div>
        <div class="flex flex-col w-full justify-center items-center">
          <div
            id="post-modal-inner"
            class="hidden-custom inline-block bg-white p-8 rounded-lg text-left overflow-hidden shadow-xl w-3xl"
          >
            <div class="sm:flex sm:items-start">
              <div class="mt-3 w-full text-center sm:mt-0 sm:text-left">
                <h3 class="text-lg leading-6 font-medium text-gray-900" id="modal-headline">
                  Create a post
                </h3>
                <div class="mt-2">
                  <input
                    l-model="currentPostTitle"
                    class="text-sm text-gray-500 border-2 border-gray-300 py-2 px-3 rounded-md w-full"
                    type="text"
                    placeholder="Title"
                  />
                </div>
                <div class="mt-2">
                  <textarea
                    maxlength="2048"
                    l-model="currentPostBody"
                    id="post-textbox"
                    class="text-sm text-gray-500 shadow-inner border-2 border-gray-300 py-2 px-3 rounded-md w-full max-h-40"
                    type="text"
                    placeholder="Text"
                  ></textarea>
                </div>
                <div class="mt-2" :hidden="!currentPostBody">
                  <h3 class="font-bold text-md mb-2">Markdown Preview</h3>
                  <div
                    id="md-preview"
                    class="text-sm text-gray-900 bg-gray-200 py-4 px-6 rounded-md w-full max-h-40 overflow-y-auto"
                    l-html="DOMPurify.sanitize(marked(currentPostBody))"
                  ></div>
                </div>
              </div>
            </div>

            <div class="flex flex-row-reverse mt-4 items-end">
              <button
                @click="
                  if (currentPostTitle.length > 0 && currentPostBody.length > 0 && currentPostTitle.length < 128 && currentPostBody.length < 2048) {
                    createPost({ title: DOMPurify.sanitize(currentPostTitle), body: DOMPurify.sanitize(currentPostBody) });
                    currentPostTitle = '';
                    currentPostBody = '';
                  } else {
                    alert('Invalid content in your title or post');
                  }
                "
                type="button"
                class="w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-purple-600 text-base font-medium text-white hover:bg-purple-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-purple-500 ml-3 sm:w-auto sm:text-sm"
              >
                Post
              </button>
              <button
                type="button"
                id="cancel-post"
                class="mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 sm:mt-0 sm:w-auto sm:text-sm"
              >
                Cancel
              </button>
            </div>
          </div>
        </div>
      </div>
    </div>
    <script src="./index.js"></script>
  </body>
</html>
